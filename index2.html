<!--
	Homepage by Emily !66666666Ok/E66666666
	pls (dont) steel
-->
<!DOCTYPE HTML>
<html>
	<head>
		<title>Homepage</title>
	    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
		<link rel="icon" type="image/png" href="pomf.png">
		<link href="style.css" rel="stylesheet" type="text/css">
		<script type="text/javascript">
			var date = new Date();
			var hour = date.getHours();
			if (hour>6 && hour<18) {
				var bgd = [ 'bgd1', 'bgd2' ]
				var bgd = bgd[Math.floor(Math.random() * bgd.length)];
				document.querySelector('html').classList.add(bgd);
			}
			else {
				var bgn = [ 'bgn1', 'bgn2' ];
				var bgn = bgn[Math.floor(Math.random() * bgn.length)];
				document.querySelector('html').classList.add(bgn);
			}
		</script>
	</head>
	
	<body>
		<div class="center">
			<div id="header">
				<div class="top" id="weatherContainer" onclick="toggleVisibility('weatherContainer', 'title');" style="cursor: pointer;">
					<div id="weather"></div>
					<div id="weather2"></div>
				</div>
				<div class="top" id="title">
					<a href="javascript:void(0);" onclick="loadWeather(); toggleVisibility('title', 'weatherContainer');" style="cursor: pointer;">Hi :3</a>
				</div>
			</div>
			<div class="searchContainer">
                <form class="searchForm" method="get" action="https://google.com/search">
                    <input class="searchBar google" type="text" name="q" placeholder="G"/>
                </form>
                <form class="searchForm" method="get" action="https://youtube.com/results">
                    <input class="searchBar youtube" type="text" name="search_query" placeholder="Y" />
                </form>
                <form class="searchForm" method="get" action="https://en.wikipedia.org/w/index.php">
                    <input class="searchBar wikipedia" type="text" name="search" placeholder="W" />
                </form>
            </div>
			
			<br />
			<div class="d1x1" id="news">
				<h1>News</h1>				
				<a href="http://www.tweakers.net/">Tweakers</a> <br />
				<a href="http://m.nos.nl/">NOS.nl</a> <br />
				<a href="http://www.nu.nl/">nu.nl</a> <br />
			</div>
			
			<div class="d1x1">
				<h1>Shitpost</h1>
				<a href="http://boards.4chan.org/g/">/g/ - Technology</a> <br />
				<a href="http://www.reddit.com/">reddit</a><br />
			</div>
			
			<div class="d1x1">
				<h1>Media</h1>
				<a href="https://www.youtube.com/feed/subscriptions/">YouTube</a> <br />
				<a href="http://www.soundcloud.com/">SoundCloud</a> <br />
				<a href="http://www.animebytes.tv/">AnimeBytes</a> <br />
				<a href="http://www.thepiratebay.se/">The Pirate Bay</a> <br />
			</div>
			
			<div class="d1x1">
				<h1>TU/e</h1>
				<a href="http://oase.tue.nl/">OASE</a> <br />
				<a href="http://webmail.tue.nl/">E-mail</a> <br />
			</div>
		
					
			<div class="d1x1">
				<h1>Following</h1>
				<a href="http://what-if.xkcd.com/">What If?</a> <br />
				<a href="http://www.prequeladventure.com/">PREQUEL</a> <br />
				<a href="http://www.mangareader.net/its-not-my-fault-that-im-not-popular">WataMote</a> <br />
				<a href="http://idforums.net/index.php?showforum=2">Initial D</a> <br />
			</div>
			
			<div class="d1x1">
				<h1>E-mail</h1>
				<a href="http://mail.google.com">Gmail</a> <br />
				<a href="http://outlook.com">Outlook</a> <br />
			</div>
			
			<div class="d1x1">
				<h1>Misc</h1>
				<a href="http://www.nederland.fm/">NL.fm</a> <br />
				<a href="http://www.9292.nl/">9292</a> <br />
				<a href="http://pomf.se/">Pomf.se</a> <br />
				<a href="https://github.com/E66666666/homepage">GitHub</a> <br />
			</div>
			
			<div class="d1x1">
				<h1>Misc</h1>
				<a href="http://www.google.com/">Google</a> <br />
				<a href="http://www.tweakers.net/pricewatch">Pricewatch</a> <br />
			</div>
			
			<div class="d2x1">
				<h1><a href="http://m.nos.nl/">NOS Nieuws</a></h1>
				<div class="d2x1Child" id="nos"></div>
			</div>
			
			<div class="d2x1">
				<h1><a href="http://www.tweakers.net/">Tweakers</a></h1>
				<div class="d2x1Child" id="tweakers"></div>
			</div>
						
			<div class="d4x2" id="xkcdContainer">
				<h1><a href="http://www.xkcd.com/">xkcd</a></h1>
				<div id="xkcd"></div>
			</div>
			
			<div class="d4x2" id="whatifContainer">
				<h1><a href="http://what-if.xkcd.com/">What If?</a></h1>
				<div id="whatif"></div>
			</div>
			
			<div class="d4x2" id="prequelContainer">
				<h1><a href="http://www.prequeladventure.com/">PREQUEL</a></h1>
				<div id="prequel"></div>
				<div id="prequelDate"></div>
			</div>
		</div>
		
		<!--
			jquery modified to contain feedEk and simpleWeather
		-->
		<script type="text/javascript" src="js/jquery-2.1.0.min.js"></script>

		<script type="text/javascript">
			// Load the feeds
			$('#tweakers').FeedEk( {
				FeedUrl : 'https://tweakers.net/feeds/nieuws.xml',
				MaxCount : 20,
				ShowDesc : false,
				ShowPubDate : false,
				TitleLinkTarget:'_self',
				DescCharacterLimit:1,
			});
			$('#nos').FeedEk( {
				FeedUrl : 'http://feeds.nos.nl/nosjournaal',
				MaxCount : 20,
				ShowDesc : false,
				ShowPubDate : false,
				TitleLinkTarget:'_self',
			});
			
			// Load the date for Prequel
			$('#prequelDate').FeedEk( {
				FeedUrl: 'http://www.prequeladventure.com/feed/',
				MaxCount : 1,
				ShowDesc : false,
				ShowPubDate : true,
				DateFormat: 'MM/DD/YYYY',
				DateFormatLang:'en',
			});
			
			// Determine current date
			var date = new Date();
			var day = date.getDay();
			var currentmonth = parseInt(date.getMonth()+1,10);
			var currentdate = date.getDate();
			
			$(window).load(function(){
			
				// Display Prequel after an update
				var prequelDate_raw = document.querySelector(".itemDate").innerHTML;
				var regex = prequelDate_raw.match(/(\d+)/g);
				var regexdate = parseInt(regex[1], 10);
				var regexmonth = parseInt(regex[0], 10);
				if ((regexmonth == currentmonth) && (currentdate >= regexdate) && (currentdate <= regexdate)) {
					document.getElementById("prequelContainer").style.display="inline";
					$('#prequel').FeedEk( {
						FeedUrl: 'http://www.prequeladventure.com/feed/',
						MaxCount : 1,
						ShowDesc : true,
						ShowPubDate : false,
						TitleLinkTarget:'_self',
					});
					$(document).ready(function () {
						var itemContentPresent = false;
						function checkForItemContent() {
							itemContentPresent = ($('.itemContent').length > 0) ? true : false;
							if (itemContentPresent) {
								$('#prequel').find('img').each(function() {
									var newSrc = 'http://www.prequeladventure.com' + $(this).attr('src');
									$(this).attr('src', newSrc);
								});
								window.clearInterval(doCheck); 
							}
						}
						var doCheck = window.setInterval(checkForItemContent, 250);
					});
				}
				
				// NOS desktop to NOS mobile
				$("a[href^='http://feeds.nos.nl']").each(function() { 
					this.href = this.href.replace(/^http:\/\/feeds\.nos\.nl\/(.*)\//, "http://m.nos.nl/artikel/");
				});

				// XKCD content
				if (day == 1 || day == 3 || day == 5) {
					$('#xkcd').FeedEk( {
						FeedUrl : 'https://xkcd.com/atom.xml',
						MaxCount : 1,
						ShowPubDate : false,
						TitleLinkTarget:'_self',
					});
					document.getElementById("xkcdContainer").style.display="inline";
				}
				if (day == 2 || day == 3) {
					$("#whatif").FeedEk( {
						FeedUrl : 'http://what-if.xkcd.com/feed.atom',
						MaxCount : 1,
						ShowPubDate : false,
						TitleLinkTarget:'_self',
					});
					document.getElementById("whatifContainer").style.display="inline";
					$(document).ready(function () {
						var itemContentPresent = false;
						function checkForItemContent() {
							itemContentPresent = ($('.itemContent').length > 0) ? true : false;
							if (itemContentPresent) {
								$('#whatif').find('img').each(function() {
									var newSrc = 'http://what-if.xkcd.com' + $(this).attr('src');
									$(this).attr('src', newSrc);
								});
								window.clearInterval(doCheck); 
							}
						}
						var doCheck = window.setInterval(checkForItemContent, 250);
					});
				}
				//window.alert("today "+currentdate+"\nprequel "+regexdate+"\n"+prequelDate_raw+"\n");
			});
			
			// Header title/weather panel switching
			var wide = window.matchMedia( "screen and (min-width: 840px)" );
			function toggleVisibility(id1, id2) {
				var hide = document.getElementById(id1);
				var show = document.getElementById(id2);
				//hide.style.display = 'none';
				//show.style.display = 'block';
				hide.style.height = '0px';
				hide.style.overflow = 'hidden';
				if (wide.matches){
					show.style.height = '130px';
				}
				else {
					show.style.height = '80px';
				}
			}
			
			// Only load weather on click
			function loadWeather() {
				$.simpleWeather({
					woeid: '729028',
					unit: 'c',
					success: function(weather) {
						html = '<p>'+weather.city+'<br />';
						html += weather.temp+'&deg;'+weather.units.temp+'<br />';
						html += weather.currently+'</p>';
						$("#weather2").html(html);
					},
					error: function(error) {
						$("#weather2").html('<p>'+error+'</p>');
					}
				});
				
				if ("geolocation" in navigator) {
					navigator.geolocation.getCurrentPosition(function(position) {
						loadWeatherPos(position.coords.latitude+','+position.coords.longitude);
					});
				}
				
				function loadWeatherPos(location, woeid) {
					$.simpleWeather({
						location: location,
						woeid: woeid,
						unit: 'c',
						success: function(weather) {
							html = '<p>'+weather.city+'<br />';
							html += weather.temp+'&deg;'+weather.units.temp+'<br />';
							html += weather.currently+'</p>';
							$("#weather").html(html);
						},
						error: function(error) {
						$("#weather").html('<p>'+error+'</p>');
						}
					});
				}
				
			}
		</script>
	</body>
</html>
